

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7. Testing &mdash; METplus 3.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_override.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery-dataframe.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="8. Adding Use Cases" href="add_use_case.html" />
    <link rel="prev" title="6. GitHub Workflow" href="github_workflow.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> METplus
          

          
            
            <img src="../_static/METplus_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">METplus Wrappers Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Users_Guide/index.html">User’s Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Contributor’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="coding_standards.html">1. Coding Standards</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_components.html">2. Basic Components of METplus Python Wrappers</a></li>
<li class="toctree-l2"><a class="reference internal" href="create_wrapper.html">3. How to Create Your Own Wrapper</a></li>
<li class="toctree-l2"><a class="reference internal" href="conda_env.html">4. Instructions for the Conda Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="deprecation.html">5. Deprecating an Old Config Variable</a></li>
<li class="toctree-l2"><a class="reference internal" href="github_workflow.html">6. GitHub Workflow</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">7. Testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#unit-tests">7.1. Unit Tests</a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-case-tests">7.2. Use Case Tests</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="add_use_case.html">8. Adding Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="documentation.html">9. Documentation</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">METplus</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Contributor’s Guide</a> &raquo;</li>
        
      <li><span class="section-number">7. </span>Testing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/Contributors_Guide/testing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="testing">
<h1><span class="section-number">7. </span>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h1>
<p>Test scripts are found in the GitHub repository in the internal_tests directory.</p>
<div class="section" id="unit-tests">
<h2><span class="section-number">7.1. </span>Unit Tests<a class="headerlink" href="#unit-tests" title="Permalink to this headline">¶</a></h2>
<p>Unit tests are run with pytest. They are found in the ‘pytests’ directory. Each tool has its own sub-directory containing its test files.</p>
<p>run_pytests.sh is a bash script that can be run to execute all of the pytests. A report will be output showing which pytest categories failed.
When running on a new computer, you must create a minimum_pytest.&lt;HOST&gt;.sh file to be able to run the script. This file contains information about the local environment so that the tests can run.</p>
</div>
<div class="section" id="use-case-tests">
<h2><span class="section-number">7.2. </span>Use Case Tests<a class="headerlink" href="#use-case-tests" title="Permalink to this headline">¶</a></h2>
<p>Use case tests are run via a Python script called test_use_cases.py, found in the use_cases directory.
Eventually the running of these tests will be automated using an external tool, such as GitHub Actions or Travis CI.
The script contains a list of use cases that are found in the repository.  For each computer that will run the use cases, a metplus_test_env.&lt;HOST&gt;.sh file must exist to set local configurations.
All of the use cases can be run by executing the script run_test_use_cases.sh. The use case test script will output the results into a directory such as /d1/&lt;USER&gt;/test-use-case-b, defined in the environment file.
If /d1/&lt;USER&gt;/test-use-case-b already exists, its content will be copied over to /d1/&lt;USER&gt;/test-use-case-a. If data is found in If /d1/&lt;USER&gt;/test-use-case-b already exists, its content will be copied over th /d1/&lt;USER&gt;/test-use-case-a, the script will prompt the user to remove those files.
Once the tests have finished running, the output found in the two directories can be compared to see what has changed. Suggested commands to run to compare the output will be shown on the screen after completion of the script.</p>
<p>To see which files and directories are only found in one run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">diff</span> <span class="o">-</span><span class="n">r</span> <span class="o">/</span><span class="n">d1</span><span class="o">/</span><span class="n">mccabe</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">use</span><span class="o">-</span><span class="n">case</span><span class="o">-</span><span class="n">a</span> <span class="o">/</span><span class="n">d1</span><span class="o">/</span><span class="n">mccabe</span><span class="o">/</span><span class="n">test</span><span class="o">-</span><span class="n">use</span><span class="o">-</span><span class="n">case</span><span class="o">-</span><span class="n">b</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">Only</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="add_use_case.html" class="btn btn-neutral float-right" title="8. Adding Use Cases" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="github_workflow.html" class="btn btn-neutral float-left" title="6. GitHub Workflow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, NCAR

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>