

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.1.18.1. TCStat: Basic Use Case &mdash; METplus 3.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/theme_override.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery-binder.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/gallery-dataframe.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="5.2. Model Applications" href="../../model_applications/index.html" />
    <link rel="prev" title="5.1.17.2. TCPairs: Basic Use Case for Extra Tropical Cyclones" href="../TCPairs/TCPairs_extra_tropical.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html" class="icon icon-home"> METplus
          

          
            
            <img src="../../../_static/METplus_logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">METplus Wrappers Guides</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">User’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../overview.html">1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../installation.html">2. Software Installation/Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../systemconfiguration.html">3. System Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../wrappers.html">4. Python Wrappers</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../usecases.html">5. METplus Use Cases</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../index.html">5.1. MET tools</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../index.html#ascii2nc">5.1.1. ASCII2NC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#cyclone-plotter">5.1.2. Cyclone Plotter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#ensemblestat">5.1.3. EnsembleStat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#example">5.1.4. Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#gempaktocf">5.1.5. GempakToCF</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#gridstat">5.1.6. GridStat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#mode">5.1.7. MODE</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#mtd">5.1.8. MTD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#pb2nc">5.1.9. PB2NC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#pcpcombine">5.1.10. PCPCombine</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#pointstat">5.1.11. PointStat</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#pyembedingest">5.1.12. PyEmbedIngest</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#regriddataplane">5.1.13. RegridDataPlane</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#seriesanalysis">5.1.14. SeriesAnalysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#statanalysis">5.1.15. StatAnalysis</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#tcmprplotter">5.1.16. TCMPRPlotter</a></li>
<li class="toctree-l4"><a class="reference internal" href="../index.html#tcpairs">5.1.17. TCPairs</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="../index.html#tcstat">5.1.18. TCStat</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../model_applications/index.html">5.2. Model Applications</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../references.html">6. References</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../quicksearch.html">7. METplus Quick Search for Use Cases</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../glossary.html">8. METplus Configuration Glossary</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../index.html#indices-and-tables">Indices and tables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../Contributors_Guide/index.html">Contributor’s Guide</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">METplus</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">User’s Guide</a> &raquo;</li>
        
          <li><a href="../../usecases.html"><span class="section-number">5. </span>METplus Use Cases</a> &raquo;</li>
        
          <li><a href="../index.html"><span class="section-number">5.1. </span>MET tools</a> &raquo;</li>
        
      <li><span class="section-number">5.1.18.1. </span>TCStat: Basic Use Case</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/Users_Guide/met_tool_wrapper/TCStat/TCStat.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-users-guide-met-tool-wrapper-tcstat-tcstat-py"><span class="std std-ref">here</span></a>     to download the full example code</p>
</div>
<div class="sphx-glr-example-title section" id="tcstat-basic-use-case">
<span id="sphx-glr-users-guide-met-tool-wrapper-tcstat-tcstat-py"></span><h1><span class="section-number">5.1.18.1. </span>TCStat: Basic Use Case<a class="headerlink" href="#tcstat-basic-use-case" title="Permalink to this headline">¶</a></h1>
<p>TCStat.conf</p>
<div class="section" id="scientific-objective">
<h2>Scientific Objective<a class="headerlink" href="#scientific-objective" title="Permalink to this headline">¶</a></h2>
<p>Summarize and stratify the data from TC-Pairs track and intensity data</p>
</div>
<div class="section" id="datasets">
<h2>Datasets<a class="headerlink" href="#datasets" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">TC-Pairs data from 201503</div>
</div>
<div class="line-block">
<div class="line"><strong>Location:</strong> All of the input data required for this use case can be found in the met_test sample data tarball. Click here to the METplus releases page and download sample data for the appropriate release: <a class="reference external" href="https://github.com/NCAR/METplus/releases">https://github.com/NCAR/METplus/releases</a></div>
<div class="line">This tarball should be unpacked into the directory that you will set the value of INPUT_BASE. See ‘Running METplus’ section for more information.</div>
</div>
<div class="line-block">
<div class="line"><strong>Data Source:</strong> Unknown</div>
</div>
</div>
<div class="section" id="metplus-components">
<h2>METplus Components<a class="headerlink" href="#metplus-components" title="Permalink to this headline">¶</a></h2>
<p>This use case utilizes the METplus TCStat wrapper to search for
files that are valid at a given run time and generate a command to run
the MET tool tc_stat if all required files are found.</p>
</div>
<div class="section" id="metplus-workflow">
<h2>METplus Workflow<a class="headerlink" href="#metplus-workflow" title="Permalink to this headline">¶</a></h2>
<p>TCStat is the only tool called in this example. It processes the following
run times:</p>
<div class="line-block">
<div class="line"><em>TCST:*</em> 2015030100</div>
</div>
</div>
<div class="section" id="metplus-configuration">
<h2>METplus Configuration<a class="headerlink" href="#metplus-configuration" title="Permalink to this headline">¶</a></h2>
<p>METplus first loads all of the configuration files found in parm/metplus_config,
then it loads any configuration files passed to METplus via the command line
with the -c option, i.e. -c parm/use_cases/met_tool_wrapper/TCStat/TCStat.conf</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1">#</span>
<span class="c1">#  CONFIGURATION</span>
<span class="c1">#</span>
<span class="o">[</span>config<span class="o">]</span>
<span class="c1"># set looping method to processes-each &#39;task&#39; in the process list runs to</span>
<span class="c1"># completion (for all init times) before the next &#39;task&#39; is run</span>
<span class="nv">LOOP_ORDER</span> <span class="o">=</span> processes

<span class="c1"># List of &#39;tasks&#39; to run</span>
<span class="nv">PROCESS_LIST</span> <span class="o">=</span> TcStat


<span class="c1"># Run tc_stat using a config file or as command line</span>
<span class="c1"># if running via MET tc_stat config file, set to CONFIG.  Leave blank or</span>
<span class="c1"># anything other than CONFIG if running via command line.</span>
<span class="c1">#TC_STAT_RUN_VIA =</span>
<span class="nv">TC_STAT_RUN_VIA</span> <span class="o">=</span> CONFIG
<span class="nv">TC_STAT_CONFIG_FILE</span> <span class="o">=</span> <span class="o">{</span>PARM_BASE<span class="o">}</span>/met_config/TCStatConfig_wrapped


<span class="c1">#              !!!!!!!IMPORTANT!!!!!!</span>
<span class="c1"># Please refer to the README_TC located in ${MET_INSTALL_DIR}/share/met/config</span>
<span class="c1"># for details on setting up your analysis jobs.</span>

<span class="c1"># For arithmetic expressions such as:</span>
<span class="c1"># -column &#39;ABS(AMSLP-BMSLP)&#39;, enclose the expression in &#39;&#39;. Notice that there are no</span>
<span class="c1"># whitespaces within the arithmetic expression.  White spaces are to be used to</span>
<span class="c1"># separate options from values (e.g. -job summary -by AMODEL,LEAD,AMSLP -init_hour 00 -column &#39;AMSLP-BMSLP&#39;).</span>
<span class="c1"># eg. -lookin {OUTPUT_BASE}/tc_pairs -job filter -dump_row {OUTPUT_BASE}/tc_stat_filter.out -basin ML -init_hr 00</span>
<span class="c1"># or -lookin {OUTPUT_BASE}/tc_pairs -job summary -by AMODEL,LEAD -column AMSLP -column AMAX_WIND -column &#39;ABS(AMAX_WIND-BMAX_WIND)&#39; -out {OUTPUT_BASE}/tc_stat/tc_stat_summary.tcst</span>

<span class="c1"># Only if TC_STAT_RUN_VIA = CLI</span>
<span class="c1"># TC_STAT_CMD_LINE_JOB = -job filter -dump_row {OUTPUT_BASE}/tc_stat/tc_stat_filter.out -basin ML -init_hour 00</span>

<span class="c1">#TC_STAT_RUN_VIA=  indicates run via command line, so you MUST define TC_STAT_JOBS_LIST, below</span>

<span class="c1"># Define the job filter via TC_STAT_JOBS_LIST.</span>
<span class="c1"># Separate each option and value with whitespace, and each job with a whitespace.</span>
<span class="c1"># No whitespace within arithmetic expressions or lists of items</span>
<span class="c1"># (e.g. -by AMSLP,AMODEL,LEAD -column &#39;(AMAX_WIND-BMAX_WIND)&#39;)</span>
<span class="c1"># Enclose your arithmetic expressions with &#39;&#39; and separate each job</span>
<span class="c1"># by whitespace:</span>
<span class="c1">#  -job filter -dump_row /path/to,  -job summary -line_type TCMPR  -column &#39;ABS(AMAX_WIND-BMAX_WIND)&#39; -out {OUTPUT_BASE}/tc_stat/file.tcst</span>
<span class="c1">#TC_STAT_JOBS_LIST = -job summary -line_type TCMPR -column &#39;ABS(AMAX_WIND-BMAX_WIND)&#39; -dump_row {OUTPUT_BASE}/tc_stat/tc_stat_summary.tcst</span>
<span class="nv">TC_STAT_JOBS_LIST</span> <span class="o">=</span> -job summary -line_type TCMPR -column <span class="s1">&#39;ASPEED&#39;</span> -dump_row <span class="o">{</span>OUTPUT_BASE<span class="o">}</span>/tc_stat/tc_stat_summary.tcst


<span class="c1">#</span>
<span class="c1">#  FILL in the following values if running multiple jobs which</span>
<span class="c1">#  requires a MET tc_stat config file.</span>
<span class="c1">#</span>
<span class="c1"># These all map to the options in the default TC-Stat config file, except these</span>
<span class="c1"># are pre-pended with TC_STAT to avoid clashing with any other similarly</span>
<span class="c1"># named options from other MET tools (eg TC_STAT_AMODEL corresponds to the</span>
<span class="c1"># amodel option in the default MET tc-stat config file, whereas AMODEL</span>
<span class="c1"># corresponds to the amodel option in the MET tc-pairs config file).</span>

<span class="c1"># Stratify by these columns:</span>
<span class="nv">TC_STAT_AMODEL</span> <span class="o">=</span>
<span class="nv">TC_STAT_BMODEL</span> <span class="o">=</span>
<span class="nv">TC_STAT_DESC</span> <span class="o">=</span>
<span class="nv">TC_STAT_STORM_ID</span> <span class="o">=</span>
<span class="nv">TC_STAT_BASIN</span> <span class="o">=</span>
<span class="nv">TC_STAT_CYCLONE</span> <span class="o">=</span>
<span class="nv">TC_STAT_STORM_NAME</span> <span class="o">=</span>

<span class="c1"># Stratify by init times via a comma-separate list of init times to</span>
<span class="c1"># include or exclude.  Time format defined as YYYYMMDD_HH or YYYYMMDD_HHmmss</span>
<span class="nv">TC_STAT_INIT_BEG</span> <span class="o">=</span> <span class="m">20150301</span>
<span class="nv">TC_STAT_INIT_END</span> <span class="o">=</span> <span class="m">20150304</span>
<span class="nv">TC_STAT_INIT_INCLUDE</span> <span class="o">=</span>
<span class="nv">TC_STAT_INIT_EXCLUDE</span> <span class="o">=</span>
<span class="nv">TC_STAT_INIT_HOUR</span> <span class="o">=</span> <span class="m">00</span>

<span class="c1"># Stratify by valid times via a comma-separate list of valid times to</span>
<span class="c1"># include or exclude.  Time format defined as YYYYMMDD_HH or YYYYMMDD_HHmmss</span>
<span class="nv">TC_STAT_VALID_BEG</span> <span class="o">=</span>
<span class="nv">TC_STAT_VALID_END</span> <span class="o">=</span>
<span class="nv">TC_STAT_VALID_INCLUDE</span> <span class="o">=</span>
<span class="nv">TC_STAT_VALID_EXCLUDE</span> <span class="o">=</span>
<span class="nv">TC_STAT_VALID_HOUR</span> <span class="o">=</span>
<span class="nv">TC_STAT_LEAD_REQ</span> <span class="o">=</span>
<span class="nv">TC_STAT_INIT_MASK</span> <span class="o">=</span>
<span class="nv">TC_STAT_VALID_MASK</span> <span class="o">=</span>

<span class="c1"># Stratify by the valid time and lead time via comma-separated list of</span>
<span class="c1"># times in format HH[MMSS]</span>
<span class="nv">TC_STAT_VALID_HOUR</span> <span class="o">=</span>
<span class="nv">TC_STAT_LEAD</span> <span class="o">=</span>

<span class="c1"># Stratify over the watch_warn column in the tcst file.  Setting this to</span>
<span class="c1"># &#39;ALL&#39; will match HUWARN, HUWATCH, TSWARN, TSWATCH</span>
<span class="nv">TC_STAT_TRACK_WATCH_WARN</span> <span class="o">=</span>

<span class="c1"># Stratify by applying thresholds to numeric data columns.  Specify with</span>
<span class="c1"># comma-separated list of column names and thresholds to be applied.</span>
<span class="c1"># The length of TC_STAT_COLUMN_THRESH_NAME should be the same as</span>
<span class="c1"># TC_STAT_COLUMN_THRESH_VAL.</span>
<span class="nv">TC_STAT_COLUMN_THRESH_NAME</span> <span class="o">=</span>
<span class="nv">TC_STAT_COLUMN_THRESH_VAL</span> <span class="o">=</span>

<span class="c1"># Stratify by a list of comma-separated columns names and values corresponding</span>
<span class="c1"># to non-numeric data columns of the values of interest.</span>
<span class="nv">TC_STAT_COLUMN_STR_NAME</span> <span class="o">=</span>
<span class="nv">TC_STAT_COLUMN_STR_VAL</span> <span class="o">=</span>

<span class="c1"># Stratify by applying thresholds to numeric data columns only when lead=0.</span>
<span class="c1"># If lead=0 and the value does not meet the threshold, discard the entire</span>
<span class="c1"># track.  The length of TC_STAT_INIT_THRESH_NAME must equal the length of</span>
<span class="c1"># TC_STAT_INIT_THRESH_VAL.</span>
<span class="nv">TC_STAT_INIT_THRESH_NAME</span> <span class="o">=</span>
<span class="nv">TC_STAT_INIT_THRESH_VAL</span> <span class="o">=</span>

<span class="c1"># Stratify by applying thresholds to numeric data columns only when lead = 0.</span>
<span class="c1"># If lead = 0 but the value doesn&#39;t meet the threshold, discard the entire</span>
<span class="c1"># track.</span>
<span class="nv">TC_STAT_INIT_STR_NAME</span> <span class="o">=</span>
<span class="nv">TC_STAT_INIT_STR_VAL</span> <span class="o">=</span>

<span class="c1"># Excludes any points where distance to land is &lt;=0. When set to TRUE, once land</span>
<span class="c1"># is encountered, the remainder of the forecast track is NOT used for the</span>
<span class="c1"># verification, even if the track moves back over water.</span>
<span class="nv">TC_STAT_WATER_ONLY</span> <span class="o">=</span>

<span class="c1"># TRUE or FALSE.  To specify whether only those track points occurring near</span>
<span class="c1"># landfall should be retained. Landfall is the last bmodel track point before</span>
<span class="c1"># the distance to land switches from water to land.</span>
<span class="nv">TC_STAT_LANDFALL</span> <span class="o">=</span>

<span class="c1"># Define the landfall retention window, which is defined as the hours offset</span>
<span class="c1"># from the time of landfall. Format is in HH[MMSS]. Default TC_STAT_LANDFALL_BEG</span>
<span class="c1"># is set to -24, and TC_STAT_LANDFALL_END is set to 00</span>
<span class="nv">TC_STAT_LANDFALL_BEG</span> <span class="o">=</span> -24
<span class="nv">TC_STAT_LANDFALL_END</span> <span class="o">=</span> <span class="m">00</span>

<span class="c1"># Specify whether only those track points common to both the ADECK and BDECK</span>
<span class="c1"># tracks should be written out</span>
<span class="nv">TC_STAT_MATCH_POINTS</span> <span class="o">=</span> <span class="nb">false</span>

<span class="c1"># IMPORTANT  Refer to the README_TC for details on setting up analysis</span>
<span class="c1"># jobs (located in {MET_INSTALL_DIR}/share/met/config</span>



<span class="c1">#</span>
<span class="c1">#  DIRECTORIES</span>
<span class="c1">#</span>
<span class="o">[</span>dir<span class="o">]</span>
<span class="c1"># TC-Stat input data (uses output from tc-pairs)</span>
<span class="nv">TC_STAT_INPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>INPUT_BASE<span class="o">}</span>/met_test/tc_pairs

<span class="c1"># TC-Stat output data (creates .tcst ASCII files which can be read or used as</span>
<span class="c1"># input to TCMPR_Plotter_wrapper (the Python wrapper to plot_tcmpr.R) to create plots.</span>
<span class="nv">TC_STAT_OUTPUT_DIR</span> <span class="o">=</span> <span class="o">{</span>OUTPUT_BASE<span class="o">}</span>/tc_stat
</pre></div>
</div>
</div>
<div class="section" id="met-configuration">
<h2>MET Configuration<a class="headerlink" href="#met-configuration" title="Permalink to this headline">¶</a></h2>
<p>METplus sets environment variables based on the values in the METplus configuration file.
These variables are referenced in the MET configuration file. <strong>YOU SHOULD NOT SET ANY OF THESE ENVIRONMENT VARIABLES YOURSELF! THEY WILL BE OVERWRITTEN BY METPLUS WHEN IT CALLS THE MET TOOLS!</strong> If there is a setting in the MET configuration file that is not controlled by an environment variable, you can add additional environment variables to be set only within the METplus environment using the [user_env_vars] section of the METplus configuration files. See the ‘User Defined Config’ section on the ‘System Configuration’ page of the METplus User’s Guide for more information.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>////////////////////////////////////////////////////////////////////////////////
//
// Default TCStat configuration file
//
////////////////////////////////////////////////////////////////////////////////

//
// The parameters listed below are used to filter the TC-STAT data down to the
// desired subset of lines over which statistics are to be computed.  Only
// those lines which meet ALL of the criteria specified will be retained.
//
// The settings that are common to all <span class="nb">jobs</span> may be specified once at the top
// level.  If no selection is listed <span class="k">for</span> a parameter, that parameter will not
// be used <span class="k">for</span> filtering.  If multiple selections are listed <span class="k">for</span> a parameter,
// the analyses will be performed on their union.
//

//
// Stratify by the AMODEL or BMODEL columns.
//
<span class="nv">amodel</span> <span class="o">=</span> <span class="si">${</span><span class="nv">AMODEL</span><span class="si">}</span><span class="p">;</span>
<span class="nv">bmodel</span> <span class="o">=</span> <span class="si">${</span><span class="nv">BMODEL</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the DESC column.
//
<span class="nv">desc</span> <span class="o">=</span> <span class="si">${</span><span class="nv">DESC</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the STORM_ID column.
//
<span class="nv">storm_id</span> <span class="o">=</span> <span class="si">${</span><span class="nv">STORM_ID</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the BASIN column.
// May add using the <span class="s2">&quot;-basin&quot;</span> job <span class="nb">command</span> option.
//
<span class="nv">basin</span> <span class="o">=</span> <span class="si">${</span><span class="nv">BASIN</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the CYCLONE column.
// May add using the <span class="s2">&quot;-cyclone&quot;</span> job <span class="nb">command</span> option.
//
<span class="nv">cyclone</span> <span class="o">=</span> <span class="si">${</span><span class="nv">CYCLONE</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the STORM_NAME column.
// May add using the <span class="s2">&quot;-storm_name&quot;</span> job <span class="nb">command</span> option.
//
<span class="nv">storm_name</span> <span class="o">=</span> <span class="si">${</span><span class="nv">STORM_NAME</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the INIT times.
// Model initialization <span class="nb">time</span> windows to include or exclude
// May modify using the <span class="s2">&quot;-init_beg&quot;</span>, <span class="s2">&quot;-init_end&quot;</span>, <span class="s2">&quot;-init_inc&quot;</span>,
// and <span class="s2">&quot;-init_exc&quot;</span> job <span class="nb">command</span> options.
//
<span class="nv">init_beg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">INIT_BEG</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">init_end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">INIT_END</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">init_inc</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_INCLUDE</span><span class="si">}</span><span class="p">;</span>
<span class="nv">init_exc</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_EXCLUDE</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the VALID times.
//
<span class="nv">valid_beg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">VALID_BEG</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">valid_end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">VALID_END</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">valid_inc</span> <span class="o">=</span> <span class="si">${</span><span class="nv">VALID_INCLUDE</span><span class="si">}</span><span class="p">;</span>
<span class="nv">valid_exc</span> <span class="o">=</span> <span class="si">${</span><span class="nv">VALID_EXCLUDE</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the initialization and valid hours and lead time.
//
<span class="nv">init_hour</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_HOUR</span><span class="si">}</span><span class="p">;</span>
<span class="nv">valid_hour</span> <span class="o">=</span> <span class="si">${</span><span class="nv">VALID_HOUR</span><span class="si">}</span><span class="p">;</span>
<span class="nv">lead</span> <span class="o">=</span> <span class="si">${</span><span class="nv">LEAD</span><span class="si">}</span><span class="p">;</span>

//
// Select tracks which contain all required lead times.
//
<span class="nv">lead_req</span> <span class="o">=</span> <span class="si">${</span><span class="nv">LEAD_REQ</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the INIT_MASK and VALID_MASK columns.
//
<span class="nv">init_mask</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_MASK</span><span class="si">}</span><span class="p">;</span>
<span class="nv">valid_mask</span> <span class="o">=</span> <span class="si">${</span><span class="nv">VALID_MASK</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the LINE_TYPE column.
//
<span class="nv">line_type</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>

//
// Stratify by checking the watch/warning status <span class="k">for</span> each track point
// common to both the ADECK and BDECK tracks.  If the watch/warning status
// of any of the track points appears in the list, retain the entire track.
//
<span class="nv">track_watch_warn</span> <span class="o">=</span> <span class="si">${</span><span class="nv">TRACK_WATCH_WARN</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by applying thresholds to numeric data columns.
//
<span class="nv">column_thresh_name</span> <span class="o">=</span> <span class="si">${</span><span class="nv">COLUMN_THRESH_NAME</span><span class="si">}</span><span class="p">;</span>
<span class="nv">column_thresh_val</span> <span class="o">=</span> <span class="si">${</span><span class="nv">COLUMN_THRESH_VAL</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by performing string matching on non-numeric data columns.
//
<span class="nv">column_str_name</span> <span class="o">=</span> <span class="si">${</span><span class="nv">COLUMN_STR_NAME</span><span class="si">}</span><span class="p">;</span>
<span class="nv">column_str_val</span> <span class="o">=</span> <span class="si">${</span><span class="nv">COLUMN_STR_VAL</span><span class="si">}</span><span class="p">;</span>

//
// Similar to the column_thresh options above
//
<span class="nv">init_thresh_name</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_THRESH_NAME</span><span class="si">}</span><span class="p">;</span>
<span class="nv">init_thresh_val</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_THRESH_VAL</span><span class="si">}</span><span class="p">;</span>

//
// Similar to the column_str options above
//
<span class="nv">init_str_name</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_STR_NAME</span><span class="si">}</span><span class="p">;</span>
<span class="nv">init_str_val</span> <span class="o">=</span> <span class="si">${</span><span class="nv">INIT_STR_VAL</span><span class="si">}</span><span class="p">;</span>

//
// Stratify by the ADECK and BDECK distances to land.
//
<span class="nv">water_only</span> <span class="o">=</span> <span class="si">${</span><span class="nv">WATER_ONLY</span><span class="si">}</span><span class="p">;</span>

//
// Specify whether only those track points <span class="k">for</span> which rapid intensification
// or weakening of the maximum wind speed occurred in the previous <span class="nb">time</span>
// step should be retained.
//
<span class="nv">rirw</span> <span class="o">=</span> <span class="o">{</span>
   <span class="nv">track</span>  <span class="o">=</span> NONE<span class="p">;</span>
   <span class="nv">adeck</span> <span class="o">=</span> <span class="o">{</span>
      <span class="nb">time</span>   <span class="o">=</span> <span class="s2">&quot;24&quot;</span><span class="p">;</span>
      <span class="nv">exact</span>  <span class="o">=</span> TRUE<span class="p">;</span>
      <span class="nv">thresh</span> <span class="o">=</span> &gt;<span class="o">=</span><span class="m">30</span>.0<span class="p">;</span>
   <span class="o">}</span>
   <span class="nv">bdeck</span> <span class="o">=</span> adeck<span class="p">;</span>
<span class="o">}</span>

//
// Specify whether only those track points occurring near landfall should be
// retained, and define the landfall retention window in HH<span class="o">[</span>MMSS<span class="o">]</span> format
// around the landfall time.
//
<span class="nv">landfall</span> <span class="o">=</span> <span class="si">${</span><span class="nv">LANDFALL</span><span class="si">}</span><span class="p">;</span>
<span class="nv">landfall_beg</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">LANDFALL_BEG</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>
<span class="nv">landfall_end</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">${</span><span class="nv">LANDFALL_END</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">;</span>


//
// Specify whether only those track points common to both the ADECK and BDECK
// tracks should be retained.  May modify using the <span class="s2">&quot;-match_points&quot;</span> job <span class="nb">command</span>
// option.
//
<span class="nv">match_points</span> <span class="o">=</span> <span class="si">${</span><span class="nv">MATCH_POINTS</span><span class="si">}</span><span class="p">;</span>

//
// Specify whether only those cases common to all models in the dataset should
// be retained.
//
<span class="nv">event_equal</span> <span class="o">=</span> FALSE<span class="p">;</span>

//
// Specify lead <span class="nb">times</span> that must be present <span class="k">for</span> a track to be included in the
// event equalization logic.
//
<span class="nv">event_equal_lead</span> <span class="o">=</span> <span class="o">[]</span><span class="p">;</span>

//
// Apply polyline masking logic to the location of the ADECK track at the
// initialization time.
//
<span class="nv">out_init_mask</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

//
// Apply polyline masking logic to the location of the ADECK track at the
// valid time.
//
<span class="nv">out_valid_mask</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>

//
// Array of TCStat analysis <span class="nb">jobs</span> to be performed on the filtered data
//
<span class="nb">jobs</span> <span class="o">=</span> <span class="si">${</span><span class="nv">JOBS</span><span class="si">}</span><span class="p">;</span>

//
// Indicate a version number <span class="k">for</span> the contents of this configuration file.
// The value should generally not be modified.
//
//version <span class="o">=</span> <span class="s2">&quot;V9.0&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Note the following variables are referenced in the MET configuration file.</p>
<ul class="simple">
<li><p><strong>ASPEED</strong></p></li>
</ul>
</div>
<div class="section" id="running-metplus">
<h2>Running METplus<a class="headerlink" href="#running-metplus" title="Permalink to this headline">¶</a></h2>
<p>This use case can be run two ways:</p>
<ol class="arabic">
<li><p>Passing in TCStat.conf then a user-specific system configuration file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>master_metplus.py -c /path/to/METplus/parm/use_cases/met_tool_wrapper/TCStat/TCStat.conf -c /path/to/user_system.conf
</pre></div>
</div>
</li>
<li><p>Modifying the configurations in parm/metplus_config, then passing in TCStat.conf:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>master_metplus.py -c /path/to/METplus/parm/use_cases/met_tool_wrapper/TCStat/TCStat.conf
</pre></div>
</div>
</li>
</ol>
<p>The former method is recommended. Whether you add them to a user-specific configuration file or modify the metplus_config files, the following variables must be set correctly:</p>
<ul class="simple">
<li><p><strong>INPUT_BASE</strong> - Path to directory where sample data tarballs are unpacked (See Datasets section to obtain tarballs). This is not required to run METplus, but it is required to run the examples in parm/use_cases</p></li>
<li><p><strong>OUTPUT_BASE</strong> - Path where METplus output will be written. This must be in a location where you have write permissions</p></li>
<li><p><strong>MET_INSTALL_DIR</strong> - Path to location where MET is installed locally</p></li>
</ul>
<p>Example User Configuration File:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>dir<span class="o">]</span>
<span class="nv">OUTPUT_BASE</span> <span class="o">=</span> /path/to/output/dir
INPUT_BASE/tc_pairs <span class="o">=</span> path/to/tc_pairs/
<span class="nv">MET_INSTALL_DIR</span> <span class="o">=</span> /path/to/met-X.Y
</pre></div>
</div>
<p><strong>NOTE:</strong> All of these items must be found under the [dir] section.</p>
</div>
<div class="section" id="expected-output">
<h2>Expected Output<a class="headerlink" href="#expected-output" title="Permalink to this headline">¶</a></h2>
<p>A successful run will output the following both to the screen and to the logfile:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>INFO: METplus has successfully finished running.
</pre></div>
</div>
<p>Refer to the value set for <strong>OUTPUT_BASE</strong> to find where the output data was generated.
Output for this use case will be found in tc_paris/201503 (relative to <strong>OUTPUT_BASE</strong>)
and will contain the following files:</p>
<p>OUTPUT_BASE/tc_stat/tc_stat_summary.tcst</p>
</div>
<div class="section" id="keywords">
<h2>Keywords<a class="headerlink" href="#keywords" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference external" href="https://ncar.github.io/METplus/search.html?q=TCStatToolUseCase&amp;check_keywords=yes&amp;area=default">TCStatToolUseCase</a></p>
</div>
<p>sphinx_gallery_thumbnail_path = ‘_static/met_tool_wrapper-TCStat.png’</p>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  0.000 seconds)</p>
<div class="sphx-glr-footer class sphx-glr-footer-example docutils container" id="sphx-glr-download-users-guide-met-tool-wrapper-tcstat-tcstat-py">
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../../../_downloads/81028e51d42a2577984414392a5a58cf/TCStat.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">TCStat.py</span></code></a></p>
</div>
<div class="sphx-glr-download docutils container">
<p><a class="reference download internal" download="" href="../../../_downloads/74e6faf4461e161eb3f8530b4800cbc3/TCStat.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">TCStat.ipynb</span></code></a></p>
</div>
</div>
<p class="sphx-glr-signature"><a class="reference external" href="https://sphinx-gallery.github.io">Gallery generated by Sphinx-Gallery</a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../../model_applications/index.html" class="btn btn-neutral float-right" title="5.2. Model Applications" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="../TCPairs/TCPairs_extra_tropical.html" class="btn btn-neutral float-left" title="5.1.17.2. TCPairs: Basic Use Case for Extra Tropical Cyclones" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, NCAR

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>